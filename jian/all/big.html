<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style type="text/css">
	#warp{
		width: 300px;height: 180px;position: relative;overflow: hidden;
	}
	#warp img{width: 300px;}
	#dv{
		width: 100px;height: 100px;background-color: yellow;
		opacity: 0.8;position: absolute;display: none;
	}
	#zhan{
		width: 300px;height: 300px;overflow: hidden;position: absolute;top: 10px;left: 320px;display: none;
	}
	#zhan img{
		width: 900px;position: relative;
	}
</style>
<body>
	<div id="warp">
	<img src="images/000.jpg" alt="">
		<div id="dv">
		</div>
	</div>
	<div id="zhan">
		<img id="xian" src="images/000.jpg" alt="">
	</div>
</body>
<script type="text/javascript">
	var warp=document.getElementById("warp");
	var dv=document.getElementById("dv");
	var zhan=document.getElementById("zhan");
	var xian=document.getElementById("xian");
	warp.onmousemove=function(event){
		dv.style.display="block";
		zhan.style.display="block";
		var event=event||window.event;

		var Xmax=warp.clientWidth-dv.offsetWidth;
		var Ymax=warp.clientHeight-dv.offsetHeight;

		var lefts=event.clientX-(warp.offsetLeft)-dv.offsetWidth/2;
		var tops=event.clientY-(warp.offsetTop)-dv.offsetHeight/2;
		
		var bi=warp.offsetWidth/dv.offsetWidth;
	
		if (lefts<0) {
			lefts=0;
		}
		if (lefts>Xmax) {
			lefts=Xmax;
		}
		if (tops<0) {
			tops=0;
		}
		if (tops>Ymax) {
			tops=Ymax;
		}
		dv.style.left=lefts+'px';
		zhan.scrollLeft=lefts*bi;

		dv.style.top=tops+'px';
		zhan.scrollTop=tops*bi;

		
	}
	warp.onmouseout=function(){
		dv.style.display="none";
		zhan.style.display="none";
	}
</script>
</html>